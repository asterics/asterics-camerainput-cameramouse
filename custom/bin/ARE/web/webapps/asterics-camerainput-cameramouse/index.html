<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" type="text/css" href="../startpage/styles/main.css">

	<!-- provided from AsTeRICS 3.0 -->
	<script type="text/javascript" src="../startpage/lib/jquery-3.2.1.min.js"></script>
    <script src="../startpage/clientExample/javascript/JSmap.js"></script>
    <script src="../startpage/clientExample/javascript/areCommunicator.js"></script>
	<!-- provided by this repository, should be part of the framework later -->
	<script src="../startpage/lib/demoLib.js"></script>

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

	<script type="text/javascript">
		/*
		Deploy model file which is hosted on a webserver, apply settings (camera device, speed) and start the model.
		*/		
		function applyAndStart() {
			var cameraSource = document.getElementById("cameraSource");
			var cameraSourceIdx = cameraSource.options[cameraSource.selectedIndex].value;
			var speed = document.getElementById("speed").value;
		
			//The JSON object must be sent as JSON string, the keys and values must be Strings as well.
			var propertyMap=JSON.stringify(
			{
				"XFacetrackerLK.1":{
					"cameraSelection":String(cameraSourceIdx)
				},
				"Slider.1":{
				  "default":String(speed)
				}
			});
			console.log("Setting model properties:"+propertyMap);
			
			//Here is an example of how you could store a file from the webserver to the ARE/data folder.
			/*
			storeFileFromWebserverOnARE('webapps/asterics-camerainput-cameramouse/models/XFaceTrackerMouse(WLM).acs', 'testModel/testModel.acs', Empty_successCallback);
			*/

			//Now let's deploy the model file, apply all settings the user selected and start the model.
			deployModelFromWebserverApplySettingsAndStartModel('webapps/asterics-camerainput-cameramouse/models/XFaceTrackerMouse(WLM).acs',propertyMap);
		}
	</script>

    <title>AsTeRICS Camera Mouse</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>AsTeRICS Camera Mouse</h1>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
			<h2>Objective</h2>Mouse control (moving mouse cursor, clicking and dragging) by head movements.
			<h2>Description</h2>By moving the head up/down or left/right the mouse cursor should move accordingly. A left click is performed by dwelling (stopping movement and waiting for some time). To do a right, double or drag click select the respective button in the ARE GUI and move the cursor to the location where the click should be performed at. The mouse speed can be changed by using the slider. Click on the On/Off button to toggle mouse control. 
			<p>

			<div>
			<img src="img/facetrackerLK-videoframe.png" alt="Video frame showing face with tracked nose and chin"/>
			<img src="img/facetrackermouse.PNG" alt="GUI with buttons and slider"/>
			</div>
			<p>
					<label for="cameraSource">Choose Camera: </label>
					<select id="cameraSource">
					  <option value="0">First camera</option>
					  <option value="1">Second camera</option>
					  <option value="2">Third camera</option>
					  <option value="3">Fourth camera</option>
					</select>			
					<label for="speed">Mouse Speed: </label>
					<input title="Mouse speed" type="range" id="speed" value="50">
			<br>
			<button onclick="applyAndStart()" title="Description: Applies all settings and starts the model" class="button"> Apply and Start Model </button>
			<p>
			<h2>Requirements</h2>
			<ul>
				<li>Integrated Webcam or USB camera</li>
				<li><a href="https://github.com/asterics/AsTeRICS/releases/tag/v3.0" target="_blank">AsTeRICS 3.0</a> installed and ARE running</li>
				<li>OS: Windows, Linux (incl. RPi), Mac OSX</li>
			</ul>
			<h2>Major Plugins</h2>
			<ul>
				<li><a target="_blank" href="http://asterics.github.io/AsTeRICS/webapps/WebACS/help/index.html?plugins&sensors/XFacetrackerLK.htm">XFacetrackerLK</a></li>
				<li><a target="_blank" href="http://asterics.github.io/AsTeRICS/webapps/WebACS/help/index.html?plugins&actuators/Mouse.htm">Mouse</a></li>
			</ul>
			<h2>Edit Model</h2>
			<a target="_blank" href="http://asterics.github.io/AsTeRICS/webapps/WebACS/?areBaseURI=http://localhost:8081&openFile=http://asterics.github.io/AsTeRICS/webapps/asterics-camerainput-cameramouse/models/XFaceTrackerMouse(WLM).acs">Open in WebACS</a>
			<h2>Source Repository</h2>
				You can fork and modify this <a target="_blank" href="https://github.com/asterics/asterics-camerainput-cameramouse">repository</a>.
			<h2>Related Videos</h2>
			<a target="_blank" href="https://youtu.be/P9qJAWegkFM?t=1955">Camera Mouse Demo Screencast</a>
			<p>
			<a target="_blank" href="https://youtu.be/P9qJAWegkFM?t=2228">Camera Mouse Model Creation Screencast</a>
			<h2>Related Tutorials</h2>
			<a target="_blank" href="https://github.com/asterics/AsTeRICS/blob/master/Documentation/AsTeRICS_CameraMouseCreation_StepbyStep_Tutorial.pdf">Camera Mouse Creation StepbyStep Tutorial</a>
			</section>
      </div>
    </div>
  </body>
</html>
